<header>
  <h2>Cancel Order</h2>
</header>
<div class="labster-lab-list">
  <h3>Are you sure you want to Cancel this order? </h3> <br/>
  <p>
  If you have more students using your labs then you have licenses available. The most recently added students will no longer be able to access the labs.
  </p>
  <br/>

  <h3>Order Information</h3>
  <p>
    Created at : {{ payment.created_at | date:'longDate' }} <br/>
    Invoice Number : {{ payment.invoice_number }}
    </p>
  <table>
    <thead>
      <tr>
        <th>Lab</th>
        <th class="align-right">Licenses</th>
        <th class="align-right">Subscriptions</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="payment_product in payment.payment_products">
        <td class="lab-description">{{ payment_product.product_name }}</td>
        <td class="align-right">{{ payment_product.item_count }}</td>
        <td class="align-right">{{ payment_product.month_subscription }} months</td>
      </tr>
    </tbody>
  </table>

  <a class="btn-labster-invoice pull-right" ng-click="cancelOrder()">Yes, please cancel the order</a>

  <div class="clear"></div>

  <h3>License Overview</h3> <br/>
  Unpaid
  <table>
    <thead>
      <tr>
        <th></th>
        <th>Lab</th>
        <th>Purchase Date</th>
        <th>Expiration Date</th>
        <th>Subscription</th>
        <th class="align-right">Licenses</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-show=" (licenses | filter: {product_type:'hs'}).length > 0" class="edu-level-invoice">
        <td></td>
        <td colspan="2"><strong>High School</strong></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr ng-repeat="license in licenses | filter: {product_type:'hs'}">
        <td>
            <input id="{{license.id}}" type="checkbox" ng-checked="selection.indexOf(license.id) > -1" ng-click="toggleSelection(license.id)" />
        </td>
        <td class="lab-description">{{ license.product_name }}
            <div ng-show="license.list_products.length > 0">
              Lab included in this package:
              <ul class="table-cell">
                <li ng-repeat="lab in license.list_products">{{ lab }}</li>
              </ul>
            </div>
        </td>
        <td>{{ license.date_bought }}</td>
        <td>{{ license.end_date }}</td>
        <td>{{ license.month_subscription }} months</td>
        <td class="align-right">{{ license.item_count }}</td>
      </tr>
    </tbody>
  </table>

  <div ng-repeat="payment in allPayments | filter: { paid: false }">
    <p>
    Created at : {{ payment.created_at | date:'longDate' }} <br/>
    Invoice Number : {{ payment.invoice_number }}
    </p>
    <table>
      <thead>
        <tr>
          <th>Lab</th>
          <th class="align-right">Licenses</th>
          <th class="align-right">Subscriptions</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="payment_product in payment.payment_products ">
          <td class="lab-description">{{ payment_product.product_name }}</td>
          <td class="align-right">{{ payment_product.item_count }}</td>
          <td class="align-right">{{ payment_product.month_subscription }} months</td>
        </tr>
      </tbody>
    </table>
  </div>

  <p>Paid licenses:</p>
  <div ng-repeat="payment in allPayments | filter: { paid: true }">
    <p>
    Created at : {{ payment.created_at | date:'longDate' }} <br/>
    Invoice Number : {{ payment.invoice_number }}
    </p>
    <table>
      <thead>
        <tr>
          <th>Lab</th>
          <th class="align-right">Licenses</th>
          <th class="align-right">Subscriptions</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="payment_product in payment.payment_products ">
          <td class="lab-description">{{ payment_product.product_name }}</td>
          <td class="align-right">{{ payment_product.item_count }}</td>
          <td class="align-right">{{ payment_product.month_subscription }} months</td>
        </tr>
      </tbody>
    </table>
  </div>

Ordered (unpaid): Y
Total licenses now: Z
Total licenses if cancelling this order: XY


